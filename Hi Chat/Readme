Nov.29th

用了一晚上的时间 8点写到11点.
写了一个单机的本地聊天室。可支持多人聊天。发文字可以，发送图片的功能待添加。
一共两个文件 server.js 和 client.html
使用指南：1.terminal中定位cd到项目文件夹
         2.输入 node server.js
	 3.打开chrome 输入http://localhost:3000/ 
	 
	 由于server.js中监听的是3000端口，所以地址是这个。也可以自己去server.JS 中改成8080等比较普遍的端口。

-------------
About

** 原生node.js服务器搭建
** http，socket，fs模块依赖使用
** socket编程
** Html练习
** 基于TCP/IP协议的一次握手建立连接
** websockets，http协议区分以及使用范畴
** npm社区活跃以及包工具使用
** 事件轮询机制在数据交互中的运用
---------------------------------------------------------------------------
大致架构

HTTP协议
	请求request
  ------------------------
服务器和客户端各自的功能

服务器： 1.接受客户端的消息
	 2.广播消息
	
客户端： 1.发送消息
        2. 接受服务器发送过来的消息
--------------------------------------------------
客户端的发送基于http协议
消息的发送和请求都基于web socket协议
 websocket是TCP协议下的，TCP与HTTP的主要区别在于，HTTP是一次请求 一次连接，一次性。而TCP可以持续连接。
 聊天的功能需要一直能连上服务器。所以主要使用websocket协议。
----------------------------------------------------

npm里面下载 socket.io的客户端的包。
  command：npm install socket

-----------------
https://nodejs.org/api/http.html#http_http_createserver_options_requestlistener

find this module
find http.createServer( )

客户端是一个HTML文件，不是js文件。为什么？ 因为客户端是用来显示的

build好 client.html之后，如何把内容发给服务器呢?
把字符读取完毕，发给他，不是发文件。服务端只会发送字符串，不会发别的。因为浏览器http会读取和解析字符串

读文件 io操作 。node.JS 下面fs 文件系统 模块
readFile 同步 异步 两种方法。什么区别？
        同步：    发送一个请求，只有事情做完了再发回来 再发下一个请求 。阻塞事件 
        异步： 不用等事情做完 就可以发下一个请求 随便发。效率是同步的40万倍
        一般nodejs都是异步，硬件资源利用率高，省下等待

        异步 用回调函数 目的是读取文件 写起来很复杂。参见nodejs官网里的fs 模块介绍
           但这里同步不用callback更简单 
           所以用同步
        fs.readFileSync(path[, options])
-------------------------------------------------------
显示出Hichat的标题了

Bug：为什么每次改一下client的html都得在terminal重新运行，重启服务器只读取一次？
因为 读取文件的命令应该放在连接服务器的地方，即httpCreate函数里面。这样每次修改客户端就不用重启服务器了
-----------------------------------------------------------------

先解决服务器的问题，再解决客户端

所有的接受和广播消息都是基于websocket协议

调用ws协议 去npm里面下载 socket.io
服务端引入socket.IO： 先cd到项目文件夹， 
                     npm install socket.io
安装完成后 项目文件夹中生成一个node_modules 这是一个依赖模块文件夹 ，里面有很多很多模块
------------------
服务端任务完成 重启服务器
开始写客户端
------------------------
socket.min.js 是干嘛的 导入
发送消息之前，首先要进入房间 - 即与服务器进行连接


====================================================以下是遇到的BUG 和待改进的地方=========================================================

为什么点击发送之后terminal没有文字？因为textarea 的tag里面的id 没有赋值

为什么terminal里面不显示消息 只显示obj了？不知道

socket.io.min.js这个模块在哪？直接google搜 只要能显示出代码页面就可以用链接。
--------------------------------------------------------------------------
打开同时几个chrome窗口，点F12打开console，随便在哪个窗口发一个text，可以看到其他几个窗口的console显示出text了。

现在怎么在窗口中展示发送的消息呢？
怎么标识出谁发的？加css
现在只能在本地玩，怎么上线？让大家都能玩？搞一个服务器建一个网站
----------------------------------------


